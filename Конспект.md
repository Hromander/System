***Глава 3***\
 ***Рабочие станции***\
Обслуживание операционных систем на рабочих станциях сводится к выполнению трех основных задач: первоначальная установка системного программного обеспечения и приложений, настройка сетевых параметров.
Рабочая станция в нашем понимании – компьютерное оборудование, выделенное для работы одного пользователя.
Энтропия – процесс нежелательной амортизации, приводящий компьютер в неизвестное состояние, которое можно исправить с помощью отладки. Чтобы продлить время пребывания компьютера в сконфигурированном состоянии, необходимо сделать так, чтобы деградация ОС протекала как можно медленнее. Главным фактором здесь являются архитектурные решения поставщика ОС.
Архитектурное решение, принятое системным администратором, может усилить или ослабить целостность операционной системы. Установка вручную всегда предполагает возможность ошибок. Если ошибки возникают в процессе установки, узел сети начнет свой жизненный цикл с тенденцией к разрушению. Если процесс установки полностью автоматизирован, новые рабочие станции будут развернуты должным образом.\
***Основы***\
С обслуживанием операционных систем рабочей станции связаны три критически важных аспекта: 1. Первоначальная установка системного ПО и приложений. 2. Обновление системного ПО и приложений. 3. Настройка сетевых параметров.
Не всегда просто автоматизировать некоторые процессы.
***Установка ОС***
Каждый поставщик ОС дает свое название системе автоматической установки ОС.
Автоматизация решает огромное количество проблем, но не все из них являются техническими. Во-первых, автоматизация экономит деньги. Разумеется, одним из основных преимуществ является время, выигранное за счет замены ручных процессов автоматическими. Кроме того, автоматизация устраняет два вида скрытых затрат. Первый относится к ошибкам: при ручном выполнении процессов существует вероятность ошибок.
Второй тип скрытых затрат относится к неоднородности. Если вы вручную устанавливаете операционную систему, вы никогда не добьетесь той же конфигурации на другой машине.
***Удостоверьтесь, что ваша автоматизированная система действительно автоматизирована***
Самый важный аспект автоматизации заключается в том, что установка должна быть полностью автоматизирована.
Лучшие системы установки все взаимодействие с человеком выполняют в самом начале, а затем завершают работу полностью автоматически.
Система JumpStart для ОС Solaris – безупречный образец полностью автоматизированной программы установки.
Когда вы решите, что закончили автоматизацию того или иного процесса, попросите опробовать вашу систему какого-нибудь человека, незнакомого с вашей работой.
***Частично автоматизированная установка*** 
Частичная автоматизация лучше, чем ее полное отсутствие. До тех пор пока система установки не будет работать идеально, необходимо обеспечить какие-то временные средства для некоторых этапов. Основная временная мера – документирование всего процесса, которое позволит впоследствии воспроизводить его в точности.
Можно автоматизировать различные этапы установки. Некоторые из них отлично поддаются автоматизации.
***Клонирование и другие методы***
 В некоторых сетях для создания новых машин используется клонирование жестких дисков. Клонирование жесткого диска подразумевает создание узла с точной конфигурацией ПО, которая необходима для всех развертываемых узлов.
Поставщики некоторых ОС не поддерживают клонированные диски, так как процесс установки может изменяться на основе таких факторов, как тип обнаруженного оборудования.
И наконец, некоторые поставщики ОС не предоставляют возможности автоматизировать установку.
***Стоит ли доверять установкам от поставщиков***
Обычно компьютеры поставляются с предустановленной ОС.
Переустановка ОС с нуля предпочтительнее по нескольким причинам. Во-первых, прежде чем машина сможет работать в вашей сети, вам, вероятно, потребуется установить другие приложения и локализации поверх установленной поставщиком ОС.
Во-вторых, поставщики вносят изменения в конфигурацию предустановленной ОС в собственных целях, никого об этом не уведомляя. Установка с нуля дает вам известное состояние каждой машины.
Другая причина для отказа от использования предустановленной ОС – то, что время от времени ОС узлов сети приходится переустанавливать.
Поставщики компьютеров предустанавливают ОС и часто вместе с ней специальные приложения, дополнения и драйверы. Всегда проверяйте, поставляются ли на диске для восстановления системы дополнения, включенные в ОС.
Со временем таких проблем стало меньше, по мере того как специфичные устройства в ноутбуках уступали место широко распространенным стандартизированным компонентам.
***Контрольные списки при установке***
Вы можете улучшить согласованность процесса с помощью контрольных списков. Эти списки помогают удостовериться, что техники не пропустят ни одного этапа. Даже если процесс установки ОС полностью автоматизирован, грамотный контрольный список все же может принести пользу.
***Обновление системного ПО и приложений***
К сожалению, с течением времени обнаруживаются новые ошибки и новые бреши в системе безопасности, и все их необходимо исправлять. Кроме того, появляются прекрасные новые приложения, которые необходимо устанавливать. Все эти задачи относятся к области обновления программного обеспечения.
Системы обновления ПО должны быть достаточно универсальными, чтобы они позволяли устанавливать новые приложения и обновлять уже имеющиеся, а также устанавливать патчи ОС.
Большинство систем позволяет включать постустановочные скрипты – программы, которые при запуске выполняют изменения, необходимые для установки пакета. Для внесения сложных изменений можно даже создать отдельный пакет, содержащий только постустановочный скрипт.
***Процесс обновления отличается от установки***
Автоматизация обновления ПО схожа с автоматизацией первичной установки, но между ними есть и несколько существенных различий: Узел сети находится в рабочем состоянии. Узел сети находится в офисе. Отсутствует необходимость в физическом доступе. Узел сети уже используется. Узел сети может не находиться в «известном состоянии». Узел сети может использоваться сотрудниками в процессе обновления. Узел сети может отсутствовать. Узел сети может иметь мультисистемную загрузку.
***Одна, несколько, много***
Вы можете снизить риск ошибок обновления, применив метод «одна, несколько, много». 
Одна. Прежде всего установите патч на одну машину. Лучше всего на свою собственную – тогда у вас будет дополнительный стимул все сделать правильно. Если при обновлении возникнут ошибки, вносите в процесс изменения до тех пор, пока он не будет работать на одной машине без ошибок. 
Несколько. Далее попробуйте установить патч на несколько других машин. Если это возможно, стоит протестировать автоматизированный процесс обновления на рабочих станциях остальных системных администраторов, прежде чем задействовать машины пользователей. Системные администраторы проявляют чуть больше понимания. Затем протестируйте систему на нескольких машинах дружелюбно настроенных к вам пользователей (не системных администраторов). 
Много. Протестировав свою систему и убедившись, что она не уничтожит ничей жесткий диск, начинайте постепенно переходить ко все большим и большим группам пользователей, нетерпимых к риску.
Необходимо обеспечить грамотное описание и повторяемость процесса, и вы должны пытаться улучшить его после каждого использования. 
***Конфигурирование сети***
 Третий компонент, необходимый для сетей, объединяющих большое количество рабочих станций, – это способ автоматизации обновления сетевых параметров – тех считанных битов информации, от которой часто зависит загрузка компьютеров и их объединение в сеть.
***Используйте шаблоны, а не конфигурируйте каждый отдельный узел ***
Системы DHCP должны иметь систему шаблонов. Некоторые системы DHCP хранят отдельные параметры, присвоенные каждому отдельному узлу сети. Другие системы DHCP хранят шаблоны, описывающие, какие параметры присваиваются узлам различных классов. Преимущество шаблонов в том, что при внесении изменений на множестве узлов вам нужно будет просто изменить шаблон, что значительно лучше, чем прокручивать длинный список узлов сети, пытаясь найти те, которые требуется изменить.
Отредактировав один-единственный файл, системный администратор может выполнить огромное количество работы! Проект с открытым кодом HostDB2 является развитием этой идеи – достаточно отредактировать один файл, чтобы сгенерировать конфигурационные файлы для DHCP и DNS, а также распределить их на соответствующие серверы.
***Когда применять динамическую аренду адресов***
 Как правило, DHCP назначает отдельный IP-адрес каждому узлу сети. Функция динамической аренды адресов позволяет вам указать диапазон IP-адресов, которые можно присваивать узлам сети.
Так как эта функция используется очень часто, многие считают, что адреса, назначаемые с помощью DHCP, должны распределяться именно так. На самом деле это не так. Зачастую лучше закрепить конкретный IP-адрес за конкретным узлом сети. Это особенно важно для серверов, чьи IP-адреса прописываются в конфигурационных файлах других узлов, таких как DNS-серверы и межсетевые экраны. Этот метод называется статическим назначением адресов в RFC или постоянной арендой адресов в DHCP-серверах компании Майкрософт.
Еще одна причина для назначения статических IP-адресов – повышение удобства использования файлов журнала.
Использование только статических IP-адресов не является достаточной мерой для безопасности.
Лучшее решение здесь – IEEE 802.1x. Этот стандарт управления доступом к сети определяет, будет ли разрешено новому узлу подключиться к сети.
***Старайтесь не использовать динамический DNS-сервер с DHCP***
 Нас не устраивает работа DHCP-систем, которые обновляют динамические DNSсерверы. Эта впечатляющее на первый взгляд свойство излишне усложняет систему и создает ненужный риск для безопасности. В системах с динамическим DNS-сервером клиентский узел сообщает серверу DHCP, каким должно быть имя узла сети, а сервер DHCP отправляет обновления на DNS-сервер.
Узлы со статической арендой всегда имеют одно и то же имя в DNS, так как они всегда получают один и тот же IP-адрес.
Это несоответствие имеет значение лишь в том случае, если данная машина является сервером. То есть, если узел не запускает никакие службы, никто не будет обращаться к нему по имени, а поэтому не имеет значения, какое имя для него прописано в DNS. Если же узел запускает службы, эта машина должна получить постоянную аренду DHCP и всегда иметь одно и то же фиксированное имя.
Использование DHCP в значительной мере снижает шанс повторения подобной ситуации.
Протоколы не могут предотвратить первичный ввод данных и не могут контролировать формат или лексикон разрешенных имен.
Динамический DNS-сервер с DHCP создает систему, которая является более запутанной, более сложной для управления, более подверженной сбоям и менее безопасной. И все это в обмен на небольшую эстетическую приятность. Оно того не стоит.
Ограничение распространения означает ограничение риска безопасности таким образом, чтобы он распространялся только в пределах определенной области. Рекомендуем ограничивать динамический DNS-сервер определенными сетевыми субдоменами, от которых не требуется высокая надежность.
***Управление сроками аренды DHCP***
 Управление сроками аренды может помочь в распределении обновлений. DHCP-клиентам задается определенный набор параметров, который будет использоваться в течение определенного периода времени. По истечении этого периода они должны обновить свою аренду. Изменения вносятся во время обновления.
***Полная уверенность в завершении***
 Существуют автоматизированные процессы, но помимо этого есть и автоматизация процесса. Если мы абсолютно уверены в процессе, мы избавлены от необходимости беспокоиться об ошибках. И поэтому мы начинаем искать новые способы применения этого же процесса.
***Вовлечение пользователей в процесс стандартизации***
 Если пользователи будут иметь дело со стандартной конфигурацией, вам необходимо вовлечь их в процесс составления спецификаций и разработки. В идеале пользователи должны принимать участие в процессе разработки с самого начала.
Системные администраторы совместно с руководством определяют, какие именно приложения будут установлены, когда именно будет проведено обновление и т. д.
Для разработки любого ПО предусмотрен набор инструментальных средств, который описывается, тестируется, одобряется и устанавливается.
***Разнообразие стандартных конфигураций***
Чем больше стандартных конфигураций используется в корпоративной сети, тем труднее все их обслуживать. Один из способов создать большое количество разнообразных конфигураций – использовать для всех конфигураций один и тот же сервер и механизмы, вместо того чтобы выделить отдельный сервер для каждого стандарта. Однако, если потратить время и создать единую обобщенную систему, способную производить множественные конфигурации и поддаваться масштабированию, вы придете к настоящему успеху. Стандартные конфигурации также могут облегчить процесс обновления ОС.
***Заключение***
Основу всего, чему посвящена данная глава, составляют три процесса: 
1. Первичная установка ОС должна быть автоматизирована.
2. Обновление программного обеспечения должно быть автоматизировано. 
3. Конфигурация сети должна администрироваться централизованно с помощью такой системы, как DHCP.
 Эти три задачи имеют критическое значение для экономного управления. Грамотное их выполнение позволит всем последующим процессам проходить более гладко.
***Глава 4***
***Серверы***
***Основы***
Оборудование, продаваемое как сервер, качественно отличается от оборудования, приобретаемого для индивидуальной рабочей станции. У серверного оборудования другие возможности, а при его разработке учитывается другая экономическая модель. При установке и поддержке серверов используются особые процедуры. Как правило, серверы поставляются с контрактом на обслуживание, 
системами резервного копирования, операционной системой и возможностью удаленного доступа. Кроме того, серверы размещают в вычислительных центрах с контролируемым микроклиматом и с ограниченным доступом к серверному оборудованию. Понимание этих различий поможет вам в принятии верного решения при закупке.
***Покупайте для серверов серверное оборудование***
Системы, продаваемые как серверы, отличаются от систем, предназначенных 
для использования в качестве клиентов или настольных рабочих станций.Серверное оборудование обычно стоит дороже, но дополнительные возможности оправдывают вложения. Вот некоторые из этих возможностей:расширяемость,большая производительность центральных процессоров,высокопроизводительные системы обмена информацией (ввода-вывода),возможности модернизации,возможность монтирования в стойку,не требуется доступ с боковых сторон,дополнения для повышенной надежности,контракт на обслуживание,альтернативные варианты управления.а. В частности, влияние рынка заставляет поставщиков улучшать серверы, чтобы было возможно размещать больше единиц в колокейшнцентрах – арендуемых вычислительных центрах, где оплата идет за единицу 
площади.
***Выбирайте поставщиков, известных надежностью продукции***
Очень важно выбирать поставщиков, продукция которых известна своей надежностью. Некоторые поставщики экономят за счет использования компонентов потребительского класса, другие используют компоненты, которые соот-ветствуют требованиям военного стандарта MIL-SPEC.
***Контракты на обслуживание и запасные компоненты***
Вот несколько разумных сценариев, которые помогут вам при выборе подходящего контракта на обслуживание:
Не критически важный сервер.
Большая группа идентичных серверов.
Постепенная модернизация.
Важные узлы.
Большое количество моделей от одного поставщика.
Критически важный узел.
Лучшие поставщики отправляют замену немедленно и ожидают возврата неисправного компонента в течение определенного срока. Это 
называется перекрестной доставкой – теоретически компоненты должны доставляться в обе стороны одновременно.
Еще больше сократить время на ремонт можно, приобретя комплект запасных 
компонентов, снимающий зависимость от поставщика при срочном ремонте 
сервера. В комплект должно входить по одному экземпляру каждого компонента системы.
Большое количество комплектов запасных частей может обойтись чрезвычайно 
дорого, особенно если для них требуются дополнительные расходы на контракт 
на обслуживание. Поставщик может предоставить дополнительные возможности, такие как контракт на обслуживание, гарантирующий доставку запасных компонентов в течение нескольких часов, что может снизить общую сумму ваших затрат.
***Обеспечение целостности данных***
На серверах хранятся критически важные данные и уникальные конфигурации, 
которые должны быть защищены.Как правило, достаточно простой системы, каждый вечер делающей 
резервные копии этих нескольких файлов.
***Размещение серверов в вычислительном центре***
Серверы должны устанавливаться в условиях с надежными энергоснабжением, 
противопожарной защитой, сетью, охлаждением и физической безопасностью.После сборки оборудование лучше устанавливать в стойку непосредственно перед установкой ОС и другого программного обеспечения.
***Конфигурация клиент-серверной ОС***
Серверы необязательно должны работать под управлением тех же ОС, что и их 
клиенты. Серверы могут быть совершенно другими, в точности такими же, или 
с той же базовой ОС, но с другой конфигурацией для иного предназначения. Для 
разных случаев подходят различные варианты.
***Обеспечьте удаленный доступ через консоль***
Для серверов необходима возможность удаленного обслуживания.
Переключатель КВМ – устройство, позволяющее нескольким машинам использовать одну клавиатуру, видеоэкран и мышь (КВМ).
В настоящее время последовательные консольные концентраторы бывают двух 
видов: самодельные и специализированные.Последовательные консоли и переключатели КВМ дают следующее преимущество: они позволяют вам управлять системной консолью, если сеть не работает 
или если система в неисправном состоянии.При приобретении серверного оборудования вам следует обратить особое внимание на то, какой тип удаленного доступа к консоли будет доступен и для решения каких задач может потребоваться такой доступ.
При использовании удаленной консоли придется продумать вопросы безопасности.При покупке сервера следует убедиться в наличии возможности удаленного консольного доступа.
***Зеркалирование загрузочных дисков***
Загрузочный диск, или диск с операционной системой, как правило, труднее 
всего заменить в случае его повреждения. Поэтому необходимо соблюдать особые 
меры безопасности, чтобы ускорить процесс восстановления. Для загрузочного 
диска каждого сервера необходимо создать зеркальный диск. Это означает, что 
установлено два диска и при любом обновлении основного диска тут же обновляется и второй. Если один из дисков откажет, система автоматически переключится на работоспособный диск.Зеркалирование предполагает определенные компромиссы в отношении производительности. Операции чтения производятся быстрее, так как чтение идет 
параллельно с двух дисков. На вас работают два шпинделя, давая существенную 
выгоду производительности на занятом сервере. 
***Повышение надежности и удобства обслуживания***
***Одноцелевые серверы***
Одноцелевое устройство – устройство, созданное для выполнения одной конкретной задачи.
Преимущество одноцелевых устройств – наличие возможностей, которых больше нигде нет. Конкуренция побуждает поставщиков добавлять новые 
возможности, повышать производительность и улучшать надежность.
***Резервные блоки питания***
По предрасположенности к сбоям среди всех системных компонентов на втором 
месте после жестких дисков находятся блоки питания. Поэтому в идеале серверы должны быть обеспечены резервными блоками питания.
Наличие резервных блоков питания не означает, что просто подключено два 
таких устройства. Это означает, что система сохраняет работоспособность, если 
один из блоков питания не функционирует.
***Полная избыточность, или n + 1***
Избыточность n + 1 относится к системам, которые 
спроектированы таким образом, что система продолжает функционировать 
даже после сбоя одного из компонентов.
При полной избыточности два полных набора оборудования объединены в отказоустойчивую конфигурацию.
Системы с полной избыточностью используют распределение нагрузки. 


