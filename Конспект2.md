# Конспект №2.
## Сервисы.
***Сервисы*** - это функции, предоставляемые серверами, которые могут быть скомпонованы на нескольких серверах. Предоставление сервиса включает в себя:\
-оборудование,\
-программное обеспечение,\
-надежность,\
-масштабирование, \
-мониторинг,\
-обслуживание,\
-поддержку.
 Системный администратор отвечает за предоставление пользователю необходимых сервисов, которые могут включать DNS, электронную почту, аутентификацию и другие. Сервисы отличают структурированное компьютерное окружение от отдельных компьютеров, и они также используются в домашних и офисных сетях.
 ### Основы
 Создание надежного и исправного сервиса является главной задачей системного администратора. Одним из самых важных факторов являются потребности пользователей. Важно провести беседу с пользователями и выяснить их потребности и ожидания от сервиса. Затем необходимо составить список других требований, таких как административные требования, о которых знают только системные администраторы. Ключевым словом при разработке должно быть "что", а не "как". Важно не забывать о целях и задачах, чтобы не запутаться в реализации.
Для успешной разработки сервисов важно использовать открытые протоколы и архитектуры.
Сервисы следует создавать на серверных машинах, которые обладают разумным уровнем надежности и быстродействия и находятся в соответствующих условиях. Необходимо установить мониторинг за сервисом и машинами, от которых он зависит. В случае сбоев должны генерироваться предупреждения или уведомления о неисправностях.
Большинство сервисов зависят от других сервисов. Понимание работы сервиса поможет точно определить, от каких сервисов он зависит. Если в лог-файлах сервиса указаны имена узлов сети, значит, он использует DNS. Если пользователи сервиса пытаются связаться с другими машинами через него, значит, этот сервис также зависит от DNS. Кроме того, практически каждый сервис зависит от сети, которая также является сервисом. DNS зависит от сети, поэтому все сервисы, зависящие от DNS, также зависят от сети. Некоторые сервисы зависят от электронной почты, которая в свою очередь зависит от DNS и сети. Другие сервисы зависят от доступа к общим файлам на других компьютерах. Многие сервисы также зависят от сервиса аутентификации и авторизации, который позволяет отличить одного пользователя от другого. Отказ в работе некоторых сервисов, таких как DNS, вызывает каскадные сбои всех других зависящих от них сервисов. При создании сервиса очень важно понимать, от каких сервисов он будет зависеть.
### Требования пользователей
Для успешного создания нового сервиса необходимо учитывать требования пользователей, так как сервис предназначен именно для них. Собирая требования, нужно выяснить, как пользователи собираются использовать сервис, какие функции им необходимы, и насколько важен сервис для них.Также важно оценить количество пользователей и их ожидания относительно производительности сервиса. Это позволяет создать надежный и работоспособный продукт.
Соглашение об уровне обслуживания является ***ключевым*** документом, который определяет, как будет обеспечиваться поддержка и уровень работы сервиса. Оно должно учитывать потребности пользователей и устанавливать реалистичные цели для системных администраторов. Этот процесс требует компромисса между ожиданиями пользователей, технической возможностью и бюджетом проекта.
### Эксплутационные требования
Эксплуатационные требования включают в себя:
1. Продумывание административного интерфейса для нового сервиса и его интеграции с другими существующими сервисами.
2. Планирование масштабирования сервиса, чтобы удовлетворить рост потребности с ростом компании.
3. Разработка процесса обновления сервиса, включая вопросы доступа, безопасности и постепенного внедрения новых версий.
4. Учёт требований к надежности, включая кластеризацию, резервные серверы и отказоустойчивое оборудование.
5. Оценка производительности сети, особенно при удаленной работе пользователей с медленным интернет-соединением.
6. Установление мониторинга и интеграции с существующими системами мониторинга.
7. Управление бюджетом, чтобы обеспечить ожидаемый уровень обслуживания в рамках выделенных ресурсов.
### Открытая архитектура
***Открытая архитектура***, использующая открытые протоколы и форматы файлов, облегчает интеграцию и взаимодействие сервисов. В отличие от закрытых систем, открытые стандарты позволяют множеству поставщиков создавать совместимые продукты, что снижает зависимость от одного поставщика и способствует конкуренции.
***Закрытые системы***, с проприетарными протоколами, могут ограничивать выбор и взаимодействие с другими системами, а также создавать сложности при обновлениях и интеграции.
***Открытые протоколы*** обеспечивают стабильность, интероперабельность и свободу выбора клиентского и серверного программного обеспечения. Они также уменьшают необходимость в шлюзах для связи с другими системами, что снижает сложность и упрощает архитектуру.
### Среда окружения
Для обеспечения надежности сервиса необходима ***надежная среда окружения***. Это включает в себя размещение всех серверов в вычислительном центре, обеспечивающем:
-надежное энергоснабжение, 
-охлаждение, 
-влажность, 
-безопасность,
-защиту от повреждений.
Серверы часто требуют высокоскоростное подключение к сети и могут быть подключены к нескольким сетям для снижения трафика. Важно, чтобы ни один компонент сервиса не зависел от программ, работающих на машинах за пределами вычислительного центра, так как это может стать слабым звеном и вызвать сбой всего сервиса.
### Ограничение доступа
***Ограничение прямого доступа к серверам*** - важная мера для обеспечения надежности сервиса. Доступ должен разрешаться только системным администраторам, чтобы предотвратить возможные сбои и нагрузки, вызванные пользователями, а также защитить сервер от нежелательных привилегий. Разрешение множеству пользователей подключаться напрямую к серверу может повысить риск сбоев и нестабильности сервиса. Поэтому рекомендуется ограничить доступ к серверам с самого начала, кроме доступа системных администраторов.
### Надежность
Для обеспечения надежности сервиса:
1. Используйте избыточное оборудование эффективно, например, подключайте блоки питания к разным источникам и разные машины к разным сетевым коммутаторам.
2. Максимально сократите число зависимостей между компонентами сервиса, чтобы уменьшить вероятные точки сбоев.
3. Создавайте настолько простой сервис, насколько это возможно, чтобы минимизировать риски.
4. Разместите избыточные системы в других сетях для резервного доступа.
5. Учитывайте топологию сети, чтобы обеспечить доступ к сервису при отказе связи с главной сетью.
6. Группируйте пользователей и сервисы так, чтобы полный отказ сервиса не останавливал работу всех сразу, а только отдельных групп.
### Производительность
***Производительность сервиса*** - важный аспект, и пользователям важно, чтобы сервис работал надежно и быстро. При разработке сервиса необходимо:
1. Понимать его структуру и возможности распределения нагрузки между несколькими машинами.
2. Тестировать нагрузку, чтобы определить, как сервис реагирует на различные уровни нагрузки и как быстро он работает.
3. Учитывать характеристики работы сервиса, такие как обращения к диску или обмен данными по сети, и выбирать оборудование соответственно.
4. Рассматривать производительность при удаленных подключениях, особенно если сеть имеет низкую пропускную способность и высокую задержку.
5. Рассматривать меры для оптимизации производительности, включая разделение трафика и использование QoS, если необходимо.
6. Обеспечивать, чтобы производительность сервиса оставалась высокой в течение нескольких лет, чтобы избежать частой модернизации.
### Мониторинг
***Мониторинг*** - важный этап в обеспечении работоспособности сервиса. ***Необходимо***:
1. Установить мониторинг производительности и проблем, а также механизмы планирования мощностей.
2. Организовать оповещения о проблемах для оперативной группы поддержки, чтобы быстро реагировать на них.
3. Проводить упреждающий мониторинг для планирования мощностей, включая сетевую пропускную способность и производительность серверов.
4. Использовать мониторинг для прогнозирования и планирования возможностей роста сервиса.
Мониторинг помогает обнаруживать и решать проблемы до того, как они заметны пользователям и планировать развитие сервиса.
### Полная избыточность
Полная избыточность включает в себя наличие дублирующих серверов, готовых взять на себя роль основных в случае сбоя. Это может быть реализовано разными способами, включая автоматический переход при сбое или разделение нагрузки между серверами.
Важно выбирать тип избыточности в зависимости от характера сервиса. Например, некоторые сервисы подходят для работы на фермах клонированных серверов, где избыточные машины работают параллельно с основными. Другие, такие как сервисы имен и аутентификации, требуют постоянно подключенных пассивных резервных серверов.
***Полная избыточность*** обеспечивает надежность и устойчивость сервиса, а также упрощает модернизацию, позволяя постепенно обновлять серверы без прерывания работы всего сервиса.
### Потоковый анализ для масштабирования
***Потоковый анализ*** помогает масштабировать сервис более точно и эффективно, разбивая его на отдельные транзакции и анализируя их. Это позволяет выявить узкие места и оптимизировать использование ресурсов. Для этого создают потоковую модель, которая включает в себя информацию о ресурсах, используемых каждой транзакцией, такие как объем памяти или количество сетевых пакетов.
***Моделирование транзакций*** позволяет определить, где возникают проблемы производительности и какие ресурсы ограничивают масштабируемость сервиса. Например, вы можете выяснить, что база данных может обрабатывать только определенное количество запросов в секунду, и это становится узким местом сервиса.
Анализ потока данных применяется на всех уровнях масштабирования и помогает оптимизировать сервис как для небольших групп пользователей, так и для миллионов пользователей одновременно.
## Вычислительные центры
Эта глава говорит о создании вычислительного центра, который не просто место с серверами, но и включает системы охлаждения, электропитания и другие. Постройка и обслуживание вычислительного центра дорого, но нужно уметь обосновывать эти расходы. В маленьких сетях рекомендации могут показаться излишними, но при росте сети они станут полезными. Колокейшн-центры могут быть экономичным вариантом. Необходимо планировать на будущее, так как изменение вычислительного центра требует профилактических перерывов.
### Размещение
При выборе места для вычислительного центра, учитывайте стихийные бедствия в регионе, такие как землетрясения, наводнения, ураганы и грозы. Подготовьтесь к возможным перебоям в энергоснабжении и связи, даже если на выбор места влиять нельзя. Рассмотрите резервные меры, включая резервные подключения и дублирование сети.\

Когда выбираете место внутри здания, обратите внимание на прочность пола, избегайте подвалов или первых этажей в регионах с риском наводнений. Подумайте о сейсмической готовности, используйте устойчивые стойки и закрепите оборудование. Разработайте надежную прокладку кабелей.\

По сейсмической готовности и защите от гроз сотрудничайте с консультантами и специалистами по безопасности, а также получите рекомендации от продавцов стоек и оборудования.
### Безопасность
Вычислительный центр должен быть физически защищен, а доступ разрешен только нуждающимся сотрудникам. Безопасность включает ограничение физического доступа и использование бесконтактных пропусков. Биометрические системы безопасности могут вызвать этические и технические вопросы, а правила для посетителей важны для общей безопасности зала.
### Электричество и охлаждение
Энергоснабжение и охлаждение вычислительного центра важны и взаимосвязаны. Оборудование потребляет электричество и выделяет тепло, что требует охлаждения. За каждый ватт энергии, потребляемый оборудованием, нужно ещё около 1 ватта для охлаждения. Эффективное управление охлаждением помогает сэкономить энергию. Вы можете направлять потоки воздуха в вычислительном центре снизу вверх или сверху вниз, в зависимости от выбранной системы охлаждения. Решая, сколько энергии и охлаждения нужно, старайтесь максимально использовать доступное пространство.\
В вычислительном центре важно контролировать влажность воздуха, идеальный диапазон – 45-55%, чтобы избежать повреждений от высокой влажности и статических разрядов при низкой. Системы энергоснабжения и охлаждения должны быть спроектированы с запасом, обычно на 8-10 лет вперед.\

Электропитание центра должно быть стабилизированным для защиты от скачков напряжения. Резервное питание с бесперебойными источниками должно быть рассчитано на короткие перебои или на длительное питание в случае продолжительных прерываний. Например, ИБП с одним часом работы хорошо подходит для частых коротких перебоев, но в случае длительных перебоев потребуется генератор и система аварийной дозаправки.\

Учтите, что обеспечение электропитанием в вычислительном центре требует тщательного планирования и учета различных факторов, таких как длительность перебоев и бюджет.\
***Автомат включения резерва (АВР)*** управляет переключением между питанием от сети и генератора. Он следит за напряжением в сети и переключает питание на источник бесперебойного питания (ИБП) при перебоях в сети. Когда сетевое напряжение восстанавливается, АВР снова переключает питание на сеть и выключает генератор.\

АВР обычно имеет ручной переключатель, который позволяет вам вручную переключить питание на сеть или генератор при необходимости. Это важно, так как всё электропитание проходит через ИБП, и при его отказе необходимо быстро переключиться на другой источник.

При выборе ИБП учтите его обслуживание, требования к окружению и способность переключения из режима быстрой зарядки батарей в постепенную. Генераторы также требуют регулярной профилактики и исследований, чтобы удостовериться в их работоспособности. Если у вас есть генератор, то системы отопления, вентиляции и кондиционирования должны иметь резервное питание, чтобы избежать перегрева в случае длительного перебоя электропитания.

***Мониторинг*** температуры в зале помогает обнаружить горячие точки, которые могут вызвать перегрев оборудования. Горячие точки следует устранить, переместив оборудование или заменив системы охлаждения и вентиляции. Также, следите за работоспособностью систем отопления, вентиляции и кондиционирования, и используйте температурные датчики и системы мониторинга для быстрого обнаружения сбоев.
### Укладка кабеля
При установке стоек важно заранее продумать, как будет укладываться кабельная проводка. Рекомендуется приобрести инструменты для укладки. Рассмотрите возможность горизонтальной и вертикальной укладки кабелей между стойками.\

Обдумайте, открытая или закрытая укладка кабелей подходит для вас. Горизонтальная укладка с использованием крупных кольцевых креплений может быть эффективной, но требует поддержания порядка. Закрытая укладка в коробах может спрятать кабели, но может быть менее удобной и привести к путанице.\

Также обратите внимание на вертикальную укладку кабелей между стойками, учтите глубину стоек и их размещение. Крепежи для кабелей могут иметь разную ширину и глубину в зависимости от количества кабелей и оборудования в стойке. Лучше переоценить, чем недооценить требования к пространству для кабельной проводки.
### Проводка
Поддержание порядка в кабельной проводке в вычислительном центре важно для системных администраторов. Фальшполы и хорошие ярлыки на стойках могут помочь скрыть и организовать кабели. Важно иметь хорошо читаемые ярлыки с указанием ряда и позиции стойки на стенах вычислительного центра. Также, соответствие цветов кабелей разному назначению или подсетям может помочь в легкости идентификации и управлении проводкой.\
Для поддержания порядка в проводке стоек серверов:
1. Все кабели серверов в одной стойке должны оставаться в этой стойке, за исключением предварительно проведенных кабелей.
2. Убедитесь, что внутри стойки достаточно места для кабелей и приобретите кабели разной длины.
3. Кабели должны быть достаточно длинными, чтобы позволить выдвинуть сервер вперед в случае сейсмических событий, но не слишком длинными, чтобы избежать свисающих петель.
4. Не пропускайте кабели в стойке по диагонали, чтобы не мешать будущим работам внутри.
5. Подготовьте кабели заранее только в случае, если вы уверены, что конфигурация сети останется неизменной, и учтите исключения из этого правила.
6. Используйте вертикальные блоки распределения питания на боковых панелях стоек для уменьшения длины кабелей питания и предотвращения помех.\
Обеспечив порядок в кабельной проводке упрощает управление и повышает надежность системы.
### Маркировка
Для эффективной работы вычислительного центра необходима грамотная маркировка и ярлыки для всех устройств и кабелей:
1. Каждое устройство должно иметь ярлыки на лицевой и задней панели с полным именем устройства.
2. В случае нескольких подключений одного типа к устройству, используйте ярлыки на интерфейсах и кабелях, предпочтительно разных цветов.
3. Ярлыки могут содержать информацию о сетях, портах и других подробностях, особенно для сетевого оборудования.
4. Используйте программную маркировку портов на сетевом оборудовании, чтобы хранить подробную информацию.
5. Обеспечьте согласованность информации на стандартных и программных ярлыках.
6. При возможности, приобретайте кабели с готовыми ярлыками, включая уникальные коды на обоих концах для отслеживания.
### Консольный доступ
***Консольный доступ*** к компьютерам в вычислительном центре может быть осуществлен через консольные серверы и переключатели КВМ. Консольные серверы предоставляют удаленный доступ ко всем устройствам без необходимости подключать клавиатуру, монитор и мышь к каждому компьютеру. Их бывает ***два типа***: с переключателями КВМ и с поддержкой последовательных консолей. Второй вариант обеспечивает удобство доступа откуда угодно и освобождает место в центре. Также рекомендуется иметь портативные последовательные консоли для аварийных ситуаций.
### Инструменты и запасы
В вычислительном центре всегда должны быть запасы кабелей, инструментов и деталей. Инструменты могут храниться в удобных тележках с разными видами инструментов, а запасные детали и материалы лучше всего организовать так, чтобы их можно было быстро найти. Это может быть контейнеры с ярлыками или отдельная комната для хранения деталей и запасов. Крупные предметы, такие как запасные машины, следует хранить в отдельном помещении, чтобы не занимать место в вычислительном центре. Ценные запасные части лучше хранить в запирающемся шкафу.
### Повышенная избыточность
Для ***повышенной избыточности*** в вычислительном центре необходимо:

1. Распланировать избыточность систем электропитания и отопления, вентиляции и кондиционирования воздуха.
2. В случае системы отопления, вентиляции и кондиционирования воздуха, предусмотреть две независимых системы, способных работать параллельно и охлаждать все помещение в одиночку.
3. В системе энергоснабжения, иметь дополнительные источники электропитания и генераторы. Распределить их так, чтобы при отказе одной части, другая могла принять на себя нагрузку.
4. Рассмотреть обходные выключатели, которые позволят удалить из цепи устройства, вышедшие из строя, и разместить их так, чтобы был доступ в случае пожара.
5. Предусмотреть несколько источников электропитания, включая переменный и постоянный ток, а также разные источники питания для оборудования, подключаемого к нескольким блокам питания.\

Это поможет обеспечить надежность и готовность вычислительного центра.
## Идеальные вычислительные центры
### Идеальный вычислительный центр Тома
***Идеальный вычислительный центр Тома***:

1. Имеет систему проверки по голосу для доступа через дверь.
2. Обладает широкими дверными проемами, чтобы вмещать крупное серверное оборудование.
3. Расположен на четвертом этаже, с системами электропитания и вентиляции на чердаке для безопасности от затопления.
4. Использует стойки одного цвета и производителя для единообразного внешнего вида.
5. Предусматривает выдвижные полки для удобства обслуживания оборудования.
6. Использует стойки размером 19 дюймов и двухрамные, скрепленные для устойчивости.
7. Оснащен просторными проходами между рядами стоек для удобства доступа.
8. Предоставляет дополнительное пространство между рядами для установки оборудования и обеспечения доступа.
9. Включает не более 12 стоек в каждом ряду и резервирует пространство для серверов с собственными стойками.
10. Предоставляет несколько общих проходов, если помещение большое, и имеет хороший обзор из главного входа.
11. Оснащен мониторами для отслеживания состояния сети и служб.

Эти характеристики делают центр удобным, безопасным и эффективным для обслуживания серверного оборудования.
### Идеальный вычислительный центр Кристины
***Идеальный вычислительный центр Кристины*** обладает следующими ключевыми особенностями:

1. Двойные двери с автоматической системой безопасности для удобного доступа и переноса оборудования.
2. Резервный генератор с достаточной мощностью для обеспечения энергией всего центра.
3. Использование ИБП для обеспечения непрерывности работы, но с регулярной проверкой генератора.
4. Отсутствие фальшпола, высокие потолки и стены в черном цвете для улучшения эстетики и эффективности систем отопления и вентиляции.
5. Подвесная шина питания поддерживает два источника питания и оборудование устанавливается на двухрамных стойках с регулируемой глубиной полок.
6. Патч-панели для сетевого оборудования и аккуратная укладка кабелей.
7. Ярлыки с уникальными серийными номерами на кабелях и машинах для идентификации.
8. Тележки с инструментами и рабочая комната с широким столом и антистатическим покрытием для удобства обслуживания оборудования.

Это обеспечивает идеальное окружение для работы и обслуживания компьютерного оборудования.









